<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #d4d4d4; -webkit-text-stroke: #d4d4d4}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s9 {font-kerning: none}
    span.s10 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s11 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s12 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s13 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s14 {font-kerning: none; color: #a34f83; background-color: #171818; -webkit-text-stroke: 0px #a34f83}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"vi"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Học tập cùng Trợ lý AI</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#chat-window::-webkit-scrollbar</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">width:</span><span class="s4"> </span><span class="s8">8px</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#chat-window::-webkit-scrollbar-track</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">background:</span><span class="s4"> #f1f5f9</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#chat-window::-webkit-scrollbar-thumb</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">background:</span><span class="s4"> #94a3b8</span><span class="s7">;</span><span class="s4"> </span><span class="s2">border-radius:</span><span class="s4"> </span><span class="s8">10px</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#chat-window::-webkit-scrollbar-thumb:hover</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">background:</span><span class="s4"> #64748b</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.message-bubble</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">max-width:</span><span class="s4"> </span><span class="s8">80%</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-100 flex items-center justify-center min-h-screen font-sans"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full max-w-2xl h-[90vh] flex flex-col bg-white rounded-2xl shadow-2xl"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"chat-screen"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex flex-1 flex-col h-full"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 border-b border-slate-200"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-slate-800 text-center"</span><span class="s3">&gt;</span><span class="s4">Mô hình học tập POWER</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"phase-indicator"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center text-sm font-medium text-slate-500 mt-1"</span><span class="s3">&gt;</span><span class="s4">Pha: PREPARE</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">header</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">main</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"chat-window"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-1 p-6 space-y-4 overflow-y-auto"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-start"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"message-bubble bg-slate-200 text-slate-800 rounded-lg py-2 px-4"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>Xin chào! Tôi là Trợ lý AI, sẵn sàng đồng hành cùng bạn trong quá trình học tập. Hãy bắt đầu pha PREPARE nhé!</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">main</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">footer</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 border-t border-slate-200 bg-white"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loading-spinner"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden flex items-center justify-center mb-2"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"animate-spin rounded-full h-5 w-5 border-b-2 border-slate-600"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"ml-2 text-slate-600"</span><span class="s3">&gt;</span><span class="s1">Trợ lý đang soạn câu trả lời...</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">form</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"message-form"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex items-center space-x-3"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"message-input"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"Nhập tin nhắn của bạn..."</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-1 w-full px-4 py-2 border border-slate-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"</span><span class="s4"> </span><span class="s2">autocomplete</span><span class="s3">=</span><span class="s1">"off"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"submit"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"send-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 flex items-center justify-center transition-colors"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s4"> </span><span class="s2">width</span><span class="s3">=</span><span class="s1">"24"</span><span class="s4"> </span><span class="s2">height</span><span class="s3">=</span><span class="s1">"24"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s3">&gt;&lt;</span><span class="s6">line</span><span class="s4"> </span><span class="s2">x1</span><span class="s3">=</span><span class="s1">"22"</span><span class="s4"> </span><span class="s2">y1</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">x2</span><span class="s3">=</span><span class="s1">"11"</span><span class="s4"> </span><span class="s2">y2</span><span class="s3">=</span><span class="s1">"13"</span><span class="s3">&gt;&lt;/</span><span class="s6">line</span><span class="s3">&gt;&lt;</span><span class="s6">polygon</span><span class="s4"> </span><span class="s2">points</span><span class="s3">=</span><span class="s1">"22 2 15 22 11 13 2 9 22 2"</span><span class="s3">&gt;&lt;/</span><span class="s6">polygon</span><span class="s3">&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">form</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">footer</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1">document</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s10">'DOMContentLoaded'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// UI Elements</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">const</span><span class="s1"> chatWindow </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s10">'chat-window'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">const</span><span class="s1"> messageForm </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s10">'message-form'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">const</span><span class="s1"> messageInput </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s10">'message-input'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">const</span><span class="s1"> sendBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s10">'send-btn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">const</span><span class="s1"> loadingSpinner </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s10">'loading-spinner'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">const</span><span class="s1"> phaseIndicator </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s10">'phase-indicator'</span><span class="s7">);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Trạng thái của ứng dụng</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">let</span><span class="s1"> currentThreadId </span><span class="s7">=</span><span class="s1"> </span><span class="s11">null</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">let</span><span class="s1"> isWaiting </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s11">let</span><span class="s4"> currentPhase </span><span class="s7">=</span><span class="s4"> </span><span class="s10">'PREPARE'</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Bắt đầu với pha PREPARE</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Hàm khởi tạo cuộc trò chuyện</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">async</span><span class="s1"> </span><span class="s11">function</span><span class="s1"> initializeChat</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> response </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> fetch</span><span class="s7">(</span><span class="s10">'/api/chat'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>method</span><span class="s7">:</span><span class="s1"> </span><span class="s10">'POST'</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>headers</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">'Content-Type'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'application/json'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>body</span><span class="s7">:</span><span class="s1"> </span><span class="s12">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">({</span><span class="s1"> action</span><span class="s7">:</span><span class="s1"> </span><span class="s10">'create_thread'</span><span class="s1"> </span><span class="s7">})</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s4"> </span><span class="s7">(!</span><span class="s4">response</span><span class="s7">.</span><span class="s4">ok</span><span class="s7">)</span><span class="s4"> </span><span class="s11">throw</span><span class="s4"> </span><span class="s11">new</span><span class="s4"> </span><span class="s12">Error</span><span class="s7">(</span><span class="s1">'Không thể tạo luồng trò chuyện.'</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> data </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> response</span><span class="s7">.</span><span class="s1">json</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentThreadId </span><span class="s7">=</span><span class="s1"> data</span><span class="s7">.</span><span class="s1">threadId</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>console</span><span class="s7">.</span><span class="s1">log</span><span class="s7">(</span><span class="s10">'Thread created:'</span><span class="s7">,</span><span class="s1"> currentThreadId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>addMessageToUI</span><span class="s7">(</span><span class="s1">error</span><span class="s7">.</span><span class="s1">message</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setFormDisabled</span><span class="s7">(</span><span class="s11">true</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Gửi tin nhắn khi submit form</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>messageForm</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s10">'submit'</span><span class="s7">,</span><span class="s1"> </span><span class="s11">async</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">const</span><span class="s1"> userMessage </span><span class="s7">=</span><span class="s1"> messageInput</span><span class="s7">.</span><span class="s1">value</span><span class="s7">.</span><span class="s1">trim</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">userMessage </span><span class="s7">||</span><span class="s1"> isWaiting </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">currentThreadId</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>setFormDisabled</span><span class="s7">(</span><span class="s11">true</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>addMessageToUI</span><span class="s7">(</span><span class="s1">userMessage</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'user'</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> response </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> fetch</span><span class="s7">(</span><span class="s10">'/api/chat'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>method</span><span class="s7">:</span><span class="s1"> </span><span class="s10">'POST'</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>headers</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">'Content-Type'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'application/json'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>body</span><span class="s7">:</span><span class="s1"> </span><span class="s12">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">({</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>action</span><span class="s7">:</span><span class="s1"> </span><span class="s10">'send_message'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>userMessage</span><span class="s7">:</span><span class="s1"> userMessage</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>threadId</span><span class="s7">:</span><span class="s1"> currentThreadId</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>phase</span><span class="s7">:</span><span class="s1"> currentPhase </span><span class="s13">// Gửi kèm pha hiện tại</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">})</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">response</span><span class="s7">.</span><span class="s1">ok</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> errorData </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> response</span><span class="s7">.</span><span class="s1">json</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">throw</span><span class="s1"> </span><span class="s11">new</span><span class="s1"> </span><span class="s12">Error</span><span class="s7">(</span><span class="s1">errorData</span><span class="s7">.</span><span class="s1">error </span><span class="s7">||</span><span class="s1"> </span><span class="s10">'Lỗi không xác định từ server.'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> data </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> response</span><span class="s7">.</span><span class="s1">json</span><span class="s7">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Hiển thị phản hồi của AI</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>addMessageToUI</span><span class="s7">(</span><span class="s1">data</span><span class="s7">.</span><span class="s1">reply</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'assistant'</span><span class="s7">);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Cập nhật pha nếu có</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">data</span><span class="s7">.</span><span class="s1">newPhase</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updatePhaseUI</span><span class="s7">(</span><span class="s1">data</span><span class="s7">.</span><span class="s1">newPhase</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s10">'Error sending message:'</span><span class="s7">,</span><span class="s1"> error</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>addMessageToUI</span><span class="s7">(</span><span class="s10">`Đã xảy ra lỗi: </span><span class="s7">${</span><span class="s1">error</span><span class="s7">.</span><span class="s1">message</span><span class="s7">}</span><span class="s10">`</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">finally</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setFormDisabled</span><span class="s7">(</span><span class="s11">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Hàm cập nhật giao diện pha</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">function</span><span class="s1"> updatePhaseUI</span><span class="s7">(</span><span class="s1">newPhase</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>currentPhase </span><span class="s7">=</span><span class="s1"> newPhase</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>phaseIndicator</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s10">`Pha: </span><span class="s7">${</span><span class="s1">currentPhase</span><span class="s7">}</span><span class="s10">`</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span>addMessageToUI</span><span class="s7">(</span><span class="s1">`Hệ thống đã chuyển sang pha: </span><span class="s7">${</span><span class="s4">currentPhase</span><span class="s7">}</span><span class="s1">`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'system'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Hàm quản lý trạng thái form</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">function</span><span class="s1"> setFormDisabled</span><span class="s7">(</span><span class="s1">disabled</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>isWaiting </span><span class="s7">=</span><span class="s1"> disabled</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>messageInput</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> disabled</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>sendBtn</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> disabled</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>loadingSpinner</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s10">'hidden'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">!</span><span class="s1">disabled</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">disabled</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageInput</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> </span><span class="s10">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageInput</span><span class="s7">.</span><span class="s1">focus</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Hàm thêm tin nhắn vào giao diện</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s11">function</span><span class="s1"> addMessageToUI</span><span class="s7">(</span><span class="s1">message</span><span class="s7">,</span><span class="s1"> role</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">const</span><span class="s1"> messageWrapper </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s10">'div'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">const</span><span class="s1"> messageBubble </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s10">'div'</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span>messageBubble</span><span class="s7">.</span><span class="s4">classList</span><span class="s7">.</span><span class="s4">add</span><span class="s7">(</span><span class="s1">'message-bubble'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'rounded-lg'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'py-2'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'px-4'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'break-words'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>messageWrapper</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'flex'</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'mb-2'</span><span class="s7">);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">switch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">role</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">case</span><span class="s1"> </span><span class="s10">'user'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageWrapper</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'justify-end'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageBubble</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'bg-blue-600'</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'text-white'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">case</span><span class="s1"> </span><span class="s10">'assistant'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageWrapper</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'justify-start'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageBubble</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'bg-slate-200'</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'text-slate-800'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">case</span><span class="s1"> </span><span class="s10">'system'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageWrapper</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'justify-center'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>messageBubble</span><span class="s7">.</span><span class="s4">classList</span><span class="s7">.</span><span class="s4">add</span><span class="s7">(</span><span class="s1">'bg-yellow-100'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'text-yellow-800'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'text-sm'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'italic'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">case</span><span class="s1"> </span><span class="s10">'error'</span><span class="s7">:</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageWrapper</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s10">'justify-center'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>messageBubble</span><span class="s7">.</span><span class="s4">classList</span><span class="s7">.</span><span class="s4">add</span><span class="s7">(</span><span class="s1">'bg-red-100'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'text-red-700'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'border'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'border-red-300'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">break</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>messageBubble</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> message</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s14">/\n/</span><span class="s11">g</span><span class="s7">,</span><span class="s1"> </span><span class="s10">'&lt;br&gt;'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>messageWrapper</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">messageBubble</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chatWindow</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">messageWrapper</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chatWindow</span><span class="s7">.</span><span class="s1">scrollTop </span><span class="s7">=</span><span class="s1"> chatWindow</span><span class="s7">.</span><span class="s1">scrollHeight</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// Bắt đầu ứng dụng</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>initializeChat</span><span class="s7">();</span></p>
<p class="p8"><span class="s1">});</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p5"><span class="s9"></span><br></p>
</body>
</html>
